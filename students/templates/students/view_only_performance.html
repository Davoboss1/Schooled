<div id="performance-div" x-data="{year: '{{current_term.year}}', term: '{{current_term.term}}'}">
	<div class="d-flex flex-column">
		<div class="d-flex">
			<h6 class="w-50 ">Year</h6>
			<h6 class="w-50">Term</h6>
		</div>
		<div class="d-flex my-2 mx-1">
			<select class="form-control" name="year" id="year" x-model="year">{% for term in terms %}
				{% ifchanged %}
				<option value="{{term.year}}" {% if current_term.year == term.year %}selected{% endif %}>{{term.session}}
				</option>
				{% endifchanged %}
				{% endfor %}
			</select>
			<select class="ml-1 form-control" name="term" id="term" x-model="term">

				<option {% if current_term.term == "1st Term" %}selected{% endif %}>1st Term</option>
				<option {% if current_term.term == "2nd Term" %}selected{% endif %}>2nd Term</option>
				<option {% if current_term.term == "3rd Term" %}selected{% endif %}>3rd Term</option>
			</select>
			<button class=" ml-2 btn btn-dark " hx-get="{% url 'students:view_only_performance' student.pk %}"
				hx-target="#performance-div" hx-swap="outerHTML"
				:hx-vals='`{ "page" : "1" , "term" : "${term}" , "year" : "${year}" }`'
				hx-loading-target="#loading-status" hx-error-target="#error-status"><span class="fa fa-repeat"></span></button>
		</div>

	</div>
	<div id="loading-status"></div>
	<div id="error-status"></div>
	<!-- Performance Table -->
	<h5 class="text-center border-bottom mb-3 pb-2">{{student.name}}</h5>
	<table class="table table-striped table-bordered performance-table table-responsive">
		<thead>
			<th>Subject</th>
			<th>Test Score</th>
			<th>Exam Score</th>
			<th>Total Score</th>
			<th>Comment</th>
		</thead>
		<tbody>
			{% for performance in performance %}
			<tr>
				<td>{{performance.subject}}</td>
				<td>{{performance.test}}</td>
				<td>{{performance.exam}}</td>
				<td>{{performance.total}}</td>
				<td>{{performance.comment}}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	{% if not performance.object_list %}
	<div class="alert alert-info text-center my-3">No Performance for this term</div>
	{% endif %}

	<!-- pagination -->
	<div class="row py-3 border-top border-bottom">
		<div class="col-4 d-flex" style="padding:0; margin:0; height:40px;">
			{% if performance.has_previous %}
			<button class="genric-btn primary mx-auto edit-performance-pagination-handler"
				hx-get="{% url 'students:view_only_performance' student.pk %}" hx-target="#performance-div"
				hx-vals='`{ "page" : "{{performance.previous_page_number}}" , "term" : "${term}" , "year" : "${year}" }`'>
				<span class="fa fa-angle-left mr-1"></span>Prev </button>
			{% endif %}
		</div>
		<div class="col-4 d-flex" style="padding:0; margin:0; height:40px;">
			<select class="form-control mx-auto edit-performance-pagination-handler" style="max-width: 100px;"
				hx-get="{% url 'students:view_only_performance' student.pk %}" hx-target="#performance-div" name="page"
				:hx-vals='`{ "term" : "${term}" , "year" : "${year}" }`'>
				{% for page_no in performance.paginator.page_range %}
				<option {% if page_no == performance.number %}selected{% endif %}>{{page_no}}</option>
				{% endfor %}
			</select>
		</div>
		<div class="col-4 d-flex" style="padding:0; margin:0; height:40px;">
			{% if performance.has_next %}
			<button class="genric-btn primary mx-auto edit-performance-pagination-handler "
				hx-get="{% url 'students:view_only_performance' student.pk %}" hx-target="#performance-div"
				:hx-vals='`{ "page" : "{{performance.next_page_number}}" , "term" : "${term}" , "year" : "${year}" }`'>Next
				<span class="fa fa-angle-right ml-1"></span></button>
			{% endif %}
		</div>
	</div>
</div>