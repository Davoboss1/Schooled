{% if all_Info.object_list.exists %}
{% for info in all_Info %}
<a data-toggle="collapse" href="#student_performance{{info.pk}}"
	class="list-group-item list-group-item-action d-flex " role="button">
	<h6 class="vcenter">
		{{info.name}}
	</h6>

	<span class="fa fa-angle-down ml-auto vcenter">
	</span>
</a>

<div class="collapse" id="student_performance{{info.pk}}" data-parent="#main-accordion">


	<!-- Performance Table -->
	<table class="table table-striped table-bordered performance-table table-responsive" id="table-body-{{info.pk}}">
		<thead>
			<th>Subject</th>
			<th>Test Score</th>
			<th>Exam Score</th>
			<th>Total Score</th>
			<th>Comment</th>
		</thead>
		<tbody>
			{% for performance in info.termly_performance|slice:":10" %}
			<tr>
				<td>{{performance.subject}}</td>
				<td>{{performance.test}}</td>
				<td>{{performance.exam}}</td>
				<td>{{performance.total}}</td>
				<td>{{performance.comment}}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	{% if not info.termly_performance %}
	<div class="alert alert-info text-center my-3">No Performance for this term</div>
	{% endif %}
	<div class="d-flex">
		<button class="btn mx-auto loadmore-btn" hx-get="{{url}}" 
		x-data="{page_no: 2, show_btn: true}" 
		hx-target="#table-body-{{info.pk}}" 
		hx-loading-target="#none" hx-error-target="#none" 
		@click="$event.target.disabled = true;" 
		@htmx:after-on-load.camel="if($event.detail.xhr.responseText != 'Empty')
		{ page_no+=1; $event.target.disabled = false;} 
		else {
			show_btn = false
		}" 
		x-show="show_btn"
		hx-swap="beforeend"
		:hx-vals='`{ "page_no": "${page_no}" , "student_pk" : "{{info.pk}}" , "year" : "${year}" , "term" : "${term}" }`' >Load more <span
				class="fa fa-arrow-circle-down"></span></button>
	</div>


</div>
<!-- End of view performance tab body-->
{% endfor %}
{% else %}
    <a class="list-group-item text-center text-danger">No students in this class</a>

{% endif %}
<!-- pagination -->
<div class="row py-3 border-top border-bottom">
    <div class="col-4 d-flex" style="padding:0; margin:0; height:40px;">
        {% if all_Info.has_previous %}
        <button class="genric-btn primary mx-auto edit-performance-pagination-handler"
            hx-get="{% url 'students:performance_page' 'view-performance' %}" hx-target="#performance-list" hx-vals='{ "page" : "{{all_Info.previous_page_number}}" }'>
            <span class="fa fa-angle-left mr-1"></span>Prev </button>
        {% endif %}
    </div>
    <div class="col-4 d-flex" style="padding:0; margin:0; height:40px;">
        <select class="form-control mx-auto edit-performance-pagination-handler" style="max-width: 100px;" hx-get="{% url 'students:performance_page' 'view-performance' %}" hx-target="#performance-list" name="page">
            {% for page_no in all_Info.paginator.page_range %}
            <option {% if page_no == all_Info.number %}selected{% endif %}>{{page_no}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-4 d-flex" style="padding:0; margin:0; height:40px;">
        {% if all_Info.has_next %}
        <button class="genric-btn primary mx-auto edit-performance-pagination-handler "
        hx-get="{% url 'students:performance_page' 'view-performance' %}" hx-target="#performance-list" hx-vals='{ "page" : "{{all_Info.next_page_number}}" }'>Next <span class="fa fa-angle-right ml-1"></span></button>
        {% endif %}
    </div>
</div>

<script>
	
	function hideElement(element) {
		console.log("Hiding element");
		element.classList.add("d-none");
	}
	
</script>
